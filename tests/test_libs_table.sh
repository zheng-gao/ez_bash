###################################################################################################
# -------------------------------------- Import Libraries --------------------------------------- #
###################################################################################################
source "${EZ_BASH_HOME}/tests/utils.sh" || exit 1
source "${EZ_BASH_HOME}/src/libs/table.sh" || exit 1

###################################################################################################
# --------------------------------------- Test Function ----------------------------------------- #
###################################################################################################
TEST_FAILURE=0

function test_ez.columns.get {
    local expects=(
        "a d b"
        "a#d#b"
        "a d "
        "a&d&c&&&b"
    )
    local results=(
        "$(echo "a    b c d" | ez.columns.get -c 1 -1 2)"
        "$(echo "a    b c d" | ez.columns.get -od "#" -c 1 -1 2)"
        "$(echo "a@@@@b@c@d" | ez.columns.get -id "@" -c 1 -1 2)"
        "$(echo 'a!!!!b!c!d' | ez.columns.get -id "!" -od "&" -c 1 -1 -2 3 4 5)"
    )
    ez.test.check --expects "expects" --results "results" || ((++TEST_FAILURE))
}

###################################################################################################
# ------------------------------------------ Run Test ------------------------------------------- #
###################################################################################################
test_ez.columns.get

exit "${TEST_FAILURE}"
